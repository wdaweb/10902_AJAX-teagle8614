<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>jQuery</title>
    <link rel="shortcut icon" href="#" type="image/x-icon">
    <link rel="stylesheet" href="style.css">
      <!-------引入jQuery函式庫------->
</head>
<body>
    <h1 class="header">jQuery</h1>
    <div class="title"></div>
    <h4></h4>
    <ul></ul>
  


    <!-- 引入jq -->
    <script src="jquery-3.5.1.min.js"></script>
</body>
</html>
<script>
    /********************************************************
    * 1.api網址  https://kktix.com/events.json
    * 2.選擇$.ajax()、$.get()、$.post()其中一種方式
    * 3.建立回呼函式(call back function)來處理回應時的各項行為
    * 4.建立錯誤處理
    ********************************************************/
     
    //利用$.ajax()方法傳送請求並取得回應
    /* $.ajax(
      {
        url:'',
        type:'',
        success:,
        error:,
        complete:
      }
    ) */
    
    // 方法1:
    // jquery.ajax(} 也可以這樣寫
    // $.ajax(
    //   {
    //     url:'https://kktix.com/events.json',
    //     type:'GET',  //同method
    //     success: function(response){
    //       console.log(response);
    //       renderList(response);
    //     },
    //     error:function(err){
    //       console.log("err:"+err);
    //     },
    //     complete:function(xhr,status){
    //       console.log("status:"+status);
    //     }
    //   }
    // )
    

    // 方法2:
    //Method: GET(安全取得資料，不會更改到資料內容、其他的方法都有機會更改到資料
    // 會針對第二個值傳入的內容作改變
    // $.get('https://kktix.com/events.json',{'table':"news",'id':12},function(response){  //=>api/add.php?table=news&id=12
    // })
    // $.get('https://kktix.com/events.json',function(response){
    //   console.log(response);
    //   renderList(response);
    // })

    
    // 方法3:但會將整個東西當字串讀入，需要在針對資料做處理
    $("ul").load('https://kktix.com/events.json');


    function renderList(response){
      document.querySelector(".title").innerHTML=response.title;
      document.querySelector("h4").innerHTML=response.updated;

      let events=response.entry;
      let str="";
      events.forEach(function(event,index){
          str=str+`<li> ${event.title} </li>`;
      });

      document.querySelector("ul").innerHTML=str;
    }
    
    //利用$.get()方法傳送請求並取得回應

  </script>